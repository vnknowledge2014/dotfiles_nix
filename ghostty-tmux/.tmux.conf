# --- Cấu hình cơ bản ---
set -g default-terminal "screen-256color"  # Hỗ trợ 256 màu, đảm bảo hiển thị màu chính xác :cite[1]

# Đổi prefix key từ Ctrl-B mặc định sang Ctrl-A
unbind C-b
set -g prefix C-a
bind-key C-a send-prefix  # Cho phép gửi prefix thật (Ctrl-A) khi nhấn Ctrl-A hai lần

# Tắt chế độ chuột, chỉ sử dụng bàn phím
set -g mouse off

# --- Chia panel (pane) ---
# Chia panel dọc (vertical split) với \
unbind %
bind '\' split-window -h -c '#{pane_current_path}'  # -c: mở tại thư mục hiện tại

# Chia panel ngang (horizontal split) với -
unbind '"'
bind - split-window -v -c '#{pane_current_path}'

# --- Quản lý session, panel và window ---
# Tạo session mới: Prefix + Shift+S (nhập tên session)
bind S command-prompt -p "New Session Name:" "new-session -A -s '%%'"
# Đổi tên session hiện tại: Prefix + $
bind-key $ command-prompt -I "#S" "rename-session '%%'"
# Rename window hiện tại: Prefix + ,
bind-key , command-prompt -I "#W" "rename-window '%%'"
# Rename pane hiện tại: Prefix + .
bind-key . command-prompt -p "New Pane Name:" -I "#T" "select-pane -T '%%'"
# Đánh số window bắt đầu từ 1
set-option -g base-index 1
# Tự động đánh số lại window khi đóng window
set-option -g renumber-windows on

# --- Điều chỉnh kích thước panel ---
# Resize pane với Prefix + Ctrl + h/j/k/l (tăng/giảm 5 đơn vị)
bind -r C-k resize-pane -U 5
bind -r C-j resize-pane -D 5
bind -r C-h resize-pane -L 5
bind -r C-l resize-pane -R 5
# Zoom pane: Prefix + m
bind -r m resize-pane -Z

# --- Copy mode với phím tắt kiểu Vim ---
set-window-option -g mode-keys vi  # Sử dụng phím tắt kiểu Vim trong copy mode
# Vào copy mode: Prefix + [
bind-key -T copy-mode-vi 'v' send -X begin-selection  # Bắt đầu selection với 'v'
bind-key -T copy-mode-vi 'y' send -X copy-selection   # Copy selection với 'y'
# Tắt hành vi mặc định khi kéo chuột
unbind -T copy-mode-vi MouseDragEnd1Pane

# --- Reload cấu hình ---
unbind r
bind r source-file ~/.config/tmux/.tmux.conf \; display-message "Config reloaded..."

# --- Status bar đơn giản ---
set -g status-style fg=default,bg=default
set -g status-left "#S "  # Hiển thị tên session bên trái
set -g status-right "%Y-%m-%d %H:%M"  # Hiển thị ngày giờ bên phải
set -g window-status-current-style "bold"  # In đậm window hiện tại